<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.swime.mapper.AdminBoardMapper">

    <select id="adminGetCountBySn" resultType="int">
        select count(*) from tbrd where sn > 0
    </select>

    <!--게시판 번호순 정렬-->
    <select id="adminGetListWithPagingBySn2" parameterType="com.swime.domain.BoardVO" resultType="com.swime.domain.BoardVO">
        <![CDATA[

        select *
        from
            (
            select rownum rn,sn, user_id, name, title, reg_Date, upd_Date, status
            from
                (
                select b.sn, b.user_id, u.name, b.title, b.reg_Date, b.upd_Date, b.status
                from
                    tuser u,
                    tbrd b
                where
                    u.id = b.user_id
                order by
    ]]>
        <choose>
            <when test="type == 'S'.toString()">
                sn asc
            </when>
            <when test="type == 'D'.toString()">
                reg_Date desc
            </when>
            <when test="type == 'SS'.toString()">
                status asc
            </when>
        </choose>
        )
        <![CDATA[
            where rownum <= #{pageNum} * #{amount}
            )
        where rn > (#{pageNum} - 1) * #{amount}

        ]]>
    </select>

    <!---->
    <select id="adminGetListWithPagingBySn" parameterType="com.swime.domain.BoardVO" resultType="com.swime.domain.BoardVO">
    <![CDATA[

        select *
        from
            (
                select rownum rn,sn, user_id, name, title, reg_Date, upd_Date, status
                from
                    (
                        select b.sn, b.user_id, u.name, b.title, b.reg_Date, b.upd_Date, b.status
                        from
                            tuser u,
                            tbrd b
                        where
                            u.id = b.user_id
                        order by
                            sn asc
                    )
                where rownum <= #{pageNum} * #{amount}
            )
        where rn > (#{pageNum} - 1) * #{amount}

        ]]>
    </select>


</mapper>
