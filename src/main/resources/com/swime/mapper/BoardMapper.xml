<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.swime.mapper.BoardMapper">

    <resultMap id="BoardVO" type="com.swime.domain.BoardVO">
        <result property="num" column="brd_num"/>
        <result property="ttl" column="brd_ttl"/>
        <result property="cn" column="brd_cn"/>
        <result property="pic" column="brd_pic"/>
        <result property="top" column="brd_top"/>
        <result property="regdate" column="brd_regdate"/>
        <result property="upddate" column="brd_upddate"/>
        <result property="cate" column="brd_cate"/>
        <result property="grpNum" column="grp_num"/>
        <result property="userNum" column="user_num"/>
    </resultMap>

    <select id="getList" resultMap="BoardVO">
    <![CDATA[
            select * from tbrd where brd_num > 0
    ]]>
    </select>

    <insert id="insert">
        insert into tbrd (brd_num, brd_ttl, brd_cn, brd_pic, brd_top, brd_cate, grp_num, user_num)
        values(seq_board.nextval, #{ttl}, #{cn}, #{pic}, #{top}, #{cate}, #{grpNum}, #{userNum})
    </insert>

    <insert id="insertSelectKey">

        <selectKey keyProperty="num" order="BEFORE" resultType="long">
            select seq_board.nextval from dual
        </selectKey>

        insert into tbrd (brd_num, brd_ttl, brd_cn, brd_pic, brd_top, brd_cate, grp_num, user_num)
        values(#{num}, #{ttl}, #{cn}, #{pic}, #{top}, #{cate}, #{grpNum}, #{userNum})
    </insert>

    <select id="read" resultMap="BoardVO">
        select * from tbrd where brd_num = #{num}
    </select>

    <delete id="delete">
        delete from tbrd where brd_num = #{num}
    </delete>

    <update id="update">
        update tbrd
        set
        brd_ttl = #{ttl},
        brd_cn = #{cn},
        brd_pic = #{pic},
        brd_top = #{top},
        brd_cate = #{cate},
        grp_num = #{grpNum},
        brd_upddate = sysdate,
        user_num = #{userNum}
        where brd_num= #{num}
    </update>

</mapper>